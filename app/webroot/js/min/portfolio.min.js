!function(){$(function(){var t,e,n,a,o;return t=function(){return $("#app_container").css("opacity",.5),$("#app_container").animate({opacity:1},200,"easeOutSine")},a=function(){var e,n,a;return a=null,n=null,e=function(){return window.Project=Backbone.Model.extend({}),window.ProjectView=Backbone.View.extend({tagName:"div",idAttribute:"project_id",template:_.template($("#project_container_template").html()),events:{"click #live_link_button":"openSite"},render:function(){var t;return t=this.model.toJSON(),this.$el.html(this.template(t)),console.log(t),this},openSite:function(){var t;return t=this.model.get("live_site_url"),window.open(t,"_blank")}}),window.ProjectThumbnailView=Backbone.View.extend({tagName:"li",template:_.template($("#thumbnail_button_template").html()),render:function(){var t;return t=this.model.toJSON(),this.$el.html(this.template(t)),$(this.el).addClass("thumbnail"),$(this.el).attr("id",this.model.get("id")),this}}),window.ProjectCollection=Backbone.Collection.extend({model:Project,idAttribute:"project_id",methodURL:{read:"/projects/action/fetch"},sync:function(t,e,n){return e.methodURL&&e.methodURL[t.toLowerCase()]&&(n.url=e.methodURL[t.toLowerCase()]),Backbone.sync(t,e,n)}}),window.ProjectThumbnailsView=Backbone.View.extend({tagName:"ul",render:function(){var t,e,n,a;for(a=this.collection.models,e=0,n=a.length;n>e;e++)t=a[e],this.renderProject(t);return $(this.el).addClass("thumbnails"),this},renderProject:function(t){var e;return e=new ProjectThumbnailView({model:t}),this.$el.append(e.render().el)}}),window.ProjectCollectionView=Backbone.View.extend({tagName:"div",render:function(t){var e,n;return e=this.collection.get(t),console.log(t),n=new ProjectView({model:e}),this.$el.append(n.render().el),this}})},$.get("/projects/templates/fetch",function(o){var i,c,r,l,s;for(r=$.parseJSON(o),l=0,s=r.length;s>l;l++)c=r[l],$("#templates").append(c);return e(),n=new ProjectCollection,i=new ProjectThumbnailsView({collection:n}),console.log(n),n.fetch({success:function(){return $("#thumbnail_gallery").html(i.render().el),$("#thumbnail_gallery").find(".thumbnail-frame").eq(0).trigger("click"),console.log($("#thumbnail_gallery").find(".thumbnail-frame").eq(0).children("img").eq(0)),t()}}),$("#thumbnail_gallery").on("click",".thumbnail, .thumbnail-frame",function(t){var e,o;return o=$(t.target).attr("id"),e=n.get(o),a=new ProjectCollectionView({collection:n}),$("#project_container").html(a.render(o).el),$("#project_container").css("opacity",.5),$("#project_container").animate({opacity:1},200,"linear"),$("#main_image").baseline(27)})})},n=function(t){var e;return e=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,e.test(t)},e=function(t,e){return $(t).popover({content:e}),$(t).popover("show")},o=function(t){return t===!0?($("#submit_contact_us_button").css("padding-top","0.4em"),$("#submit_contact_us_button").css("padding-bottom","0.4em"),$("#submit_contact_us_button").html('<img src="/img/ajax-loader.gif"/>')):($("#submit_contact_us_button").css("padding-top","0em"),$("#submit_contact_us_button").css("padding-bottom","0em"),$("#submit_contact_us_button").html('Send <i class="icon-envelope icon-white" />'))},$(document).ready(function(){var i,c,r,l,s;return i=null,c=null,s=null,r=null,$("#about_me_link").on("click",function(){return null!==r&&l(),r="about",null===i?$.get("/main/about",function(e){return $("#app_container").html(e),t()}):($("#app_container").append(i),t())}),$("#projects_link").on("click",function(){return null!==r&&l(),r="projects",null===s?$.get("/projects",function(t){return $("#app_container").html(t),$("#app_container").css("opacity",0),a()}):($("#app_container").append(s),t())}),$("#contact_me_link").on("click",function(){return null!==r&&l(),r="contact",null===c?$.get("/main/contact",function(e){return $("#app_container").html(e),t()}):($("#app_container").append(c),t())}),l=function(){return"about"===r?i=$("#app_container").children().eq(0).detach():"projects"===r?s=$("#app_container").children().eq(0).detach():"contact"===r?c=$("#app_container").children().eq(0).detach():void 0},$("#app_container").on("click","#view_cv_button",function(){var t;return t="/pdf/CV.pdf",window.open(t,"_blank")}),$("#app_container").on("click","a",function(t){var e;return t.preventDefault(),e=$(t.target).attr("href"),window.open(e,"_blank")}),$("#app_container").on("focus","input, textarea",function(t){var e;return e=t.target.id,$("#"+e).parent().animate({"border-color":"#333333"},100),$("#"+t.target.id).parent().popover("destroy")}),$("#app_container").on("focusout","input, textarea",function(t){var e;return e=t.target.id,$("#"+e).parent().animate({"border-color":"#999999"},100)}),$("#app_container").on("keyup","#contact_email_address",function(){var t,e;return t=$("#contact_email_address").val(),""!==t?(e=n(t),e===!0?$("#contact_email_symbol_container").html('<i class="icon-ok"></i>'):$("#contact_email_symbol_container").html('<i class="icon-remove"></i>')):$("#contact_email_symbol_container").html("")}),$("#app_container").on("click","#submit_contact_us_button",function(){var t,a,i,c,r,l,s;return a=$("#contact_email_address").val(),i=$("#full_name").val(),s=$("#message_subject").val(),l=$("#message_body").val(),""===a?e("#contact_email_container","Please enter your email address."):n(a)===!1?e("#contact_email_container","Your email address is invalid."):""===i?e("#full_name_container","Please give your name."):""===s?e("#message_subject_container","Please give your message subject."):(l="")?e("#message_body_container","Please give your message body."):(c=!0,r=!1,o(c),$(this).doTimeout("change_button",300,function(){return r=!0,c===!1?o(c):void 0}),t={email_address:$("#contact_email_address").val(),full_name:$("#full_name").val(),message_subject:$("#message_subject").val(),message_body:$("#message_body").val()},$.post("/main/contact",t,function(t){var e;return c=!1,r===!0&&o(c),e=$.parseJSON(t),"success"===e.status?($(".alert-success").css("display","inline"),$(".alert-success").animate({opacity:1},300)):($(".alert-error").css("display","inline"),$(".alert-error").animate({opacity:1},300)),$("#app_container").off("click","#submit_contact_us_button"),$("#contact_container label, #submit_contact_us_button, #message_body_container, #contact_email_container, #contact_email_symbol_container, #full_name_container, #message_subject_container").animate({opacity:.4},300),$("#contact_container input, #contact_container textarea").prop("disabled",!0)}))}),$("#about_me_link").trigger("click")})})}.call(this);